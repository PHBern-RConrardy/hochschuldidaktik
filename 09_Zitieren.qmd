:::{.callout-note}
## Lernziele

Nach diesem Kapitel verstehst du:

- in beliebigen Formaten (Webseiten, Slides, PDFs, ...) nach APA7 zitieren kannst. 
- deine Bibliographie automatisch aus Zotero updatest.
- auf revealjs die Zitate stylst.

:::


# Zotero

Zotero ist ein Literaturverwaltungsprogramm. PHBern Mitarbeiter erhalten (Stand 2025) uneingeschränken Cloudspeicher. Zotero hat Plugins für Textverarbeitungsprogramme. Quarto braucht für sein Literaturverzeichnis alle Quellen in einem BibTex-Format und Quarto (sowie vermutlich alle Literaturverwaltungsprogramme) kann dies generieren, es kann es sogar automatisch neu generieren, falls Literatur hinzukommt.

::: {#lst-code}
```bibtex
@misc{2023a,
  title = {Analyzing a Meta-Analysis of Flipped Learning},
  year = {2023},
  month = feb,
  journal = {Robert Talbert, Ph.D.},
  urldate = {2023-02-24},
  abstract = {Some additional thoughts on a recent EdSurge article and a critical piece on flipped learning},
  howpublished = {http://rtalbert.org/analyzing-a-meta-analysis-of-flipped-learning/},
  langid = {english}
}
```
Beispiel eines Items in einer BibTex-Datei
:::



## Citation-Key

In Quarto wirst du später die Quellen mit einem `Citation Key` zitieren. Du schreibst z.B. im Text `@talbert2023`oder `@talbert_analyzing_202`. Wie dieser Key aussieht, entscheidest du. Kürzere Keys kann man schneller schreiben, aber manche Autoren haben im gleichen Jahr mehrere Papers rausgebracht, und dann muss ich nachschauen welches `talbert2023_1` und welches `tablert2023_2` ist.

Installiere das Zotero-Plugin (übers Menü) `Better BibTex for Zotero`. 

Stelle die Citation Keys in den Settings (Einstellungen) von Zotero, unter BetterBibtex ein. 

![Einstellungen von Citation Keys in Zotero](screenshots/zotero_bibtex.png){#fig-ver}

Eine komplette Erklärung zu allen möglichen Citation Keys findest du auf [jeweiligen Wiki](https://deepwiki.com/retorquere/zotero-better-bibtex/3.1-citation-key-format-syntax).


## Export

Exportiere nun deine gesamte Library über Zotero, achte dabei darauf, dass du "keep updated" aktiviert hast. Speicher sie in den gleichen Ordner wie deine Webseite ab.


## Schritt A: Automatischen Export aus Zotero einrichten

Es gibt zwei einfache Wege. Nutze den, der dir besser liegt.

### Weg 1: Export direkt auf einer Sammlung

1. Öffne Zotero.  
2. Rechtsklick auf die **gewünschte Sammlung** (z. B. „Masterarbeit“).  
3. **„Export Library…“** wählen.  
4. **Format:** *Better BibTeX* auswählen.  
5. **Häkchen setzen:** *Keep updated* (automatisch aktuell halten).  
6. **Speicherort wählen:** in deinem Quarto-Projekt, z. B. `refs/references.bib`.  
7. **OK**. Fertig.

Jede Änderung in der Sammlung landet nun automatisch in `references.bib`.

### Weg 2: Zentral in den Better‑BibTeX‑Einstellungen

1. Zotero → **Einstellungen** → **Better BibTeX**.  
2. Reiter **Automatic export**.  
3. **„+“** klicken, die Sammlung wählen und als **Zielpfad** `refs/references.bib` angeben.  
4. **On change** aktivieren (bei Änderungen automatisch exportieren).

> Tipp: Lege im Projekt einen Ordner **`refs/`** an und speichere alle Literatur-Dateien (z. B. `references.bib`, `style.csl`) dort.


## Schritt B: Quarto für Literatur konfigurieren

Du kannst die Literatur **global** in `_quarto.yml` oder **pro Seite/Document** im YAML‑Kopf einstellen.

### Global (für Website oder Book empfohlen)

```yaml
project:
  type: website

format:
  html:
    toc: true

bibliography: refs/references.bib
csl: refs/apa.csl        # optional: Zitationsstil (z. B. APA 7)
link-citations: true     # verlinkt Zitate mit dem Literaturverzeichnis
```

### Pro Seite (im Kopf der .qmd-Datei)

```markdown
---
title: "Methode"
bibliography: refs/references.bib
csl: refs/apa.csl
link-citations: true
---
```

Wenn du keinen `csl` angibst, nutzt Quarto einen Standardstil. Mit einer `.csl`-Datei (z. B. `apa.csl`, `chicago-author-date.csl`) bestimmst du den genauen Zitationsstil. Lege die Datei in `refs/` ab.


## Schritt C: Zitieren im Text

Verwende die **Zitier-Keys** aus Zotero (Better BibTeX erzeugt sie automatisch, z. B. `müller2021lernen`).

Grundformen:

```markdown
Nachweis im Fließtext: @mueller2021lernen zeigt, dass …

Klammernachweis: … wie mehrfach gezeigt wurde [@mueller2021lernen].

Mehrere Quellen: [@mueller2021lernen; @meier2020; @smith2019]

Seitenzahlen: [@mueller2021lernen, S. 23–25]  # „p.“/„S.“ ist nur Text

Präfix/Suffix: Vgl. @mueller2021lernen, siehe auch [@smith2019, Kap. 3].
```

Beim **Rendern** erzeugt Quarto die korrekten Zitate und am Dokumentende automatisch das **Literaturverzeichnis**.


## Option: Literaturverzeichnis sortieren und steuern

- Die Sortierung und Formatierung übernimmt der **CSL‑Stil** (Datei `*.csl`).  
- Falls du Quellen im Verzeichnis **aufführen, aber nicht zitieren** willst, nutze `nocite` im YAML‑Kopf:

```markdown
---
nocite: |
  @mueller2021lernen, @smith2019
---
```


## Arbeitsweise in der Praxis

1. Quellen **in Zotero sammeln** (PDFs, DOIs, Webseiten).  
2. Sicherstellen, dass der **Auto‑Export** aktiv ist (Ziel: `refs/references.bib`).  
3. In Quarto **`bibliography`** (und optional `csl`) setzen.  
4. Mit **@key** im Text zitieren.  
5. **Rendern** → Zitate und Literaturverzeichnis erscheinen automatisch.


## Typische Probleme und Lösungen

- **„Missing citation“ / Key wird nicht gefunden**  
  - Stimmt der **Pfad** zu `refs/references.bib`?  
  - Liegt die `.bib` wirklich **im Projekt** und heißt so wie im YAML?  
  - Wurde Zotero **gerade aktualisiert** (Auto‑Export lief schon durch)? Notfalls in Zotero **„Refresh“** bzw. einmal manuell exportieren.

- **Falscher Zitierstil**  
  - CSL‑Datei prüfen (liegt sie in `refs/`?), Pfad in `_quarto.yml` korrekt?  
  - Nach Änderung an `csl` **neu rendern**.

- **Umlaute/Zeichensatz**  
  - In Zotero Datensätze sauber pflegen (Autoren, Titel).  
  - Better BibTeX sorgt normalerweise für korrekte Unicode‑Ausgabe.

- **Unklare Zitier-Keys**  
  - In Zotero (BBT) kannst du den Key **pinnen**: Rechtsklick auf Eintrag → *Better BibTeX → Pin Citation Key* (ändert sich dann nicht mehr).


## Beispiel-Miniprojekt (Struktur)

```
mein-projekt/
├─ _quarto.yml
├─ index.qmd
├─ text.qmd
└─ refs/
   ├─ references.bib
   └─ apa.csl
```

In `index.qmd` zitierst du z. B. so:

```markdown
---
title: "Beispiel"
bibliography: refs/references.bib
csl: refs/apa.csl
link-citations: true
---

Ein klassisches Ergebnis ist @smith2019. Für Details siehe [@mueller2021lernen, S. 45].
```


## Zusammenfassung

- Richte in Zotero (mit Better BibTeX) einen **Auto‑Export** deiner Sammlung nach `refs/references.bib` ein.  
- Verweise in Quarto per `bibliography:` (und optional `csl:`) auf diese Dateien.  
- Zitiere mit **@key** – Quarto erzeugt Zitate und Literaturverzeichnis automatisch.
